<?php // var_dump($this);die;  ?>
<div class="container component">
	<h1><?php echo $this->title; ?></h1>
	<?php
	if (isset($this->data) && $this->data instanceof Mongodloid_Cursor) :
		print '<table class="table table-striped table-bordered">';
		print '<thead><tr><th>#</th>';
		foreach ($this->columns as $h) {
			print '<th>' . $h . '</th>';
		}
		print '</tr></thead><tbody>';
		$c = 0;
		foreach ($this->data as $item) {
			print '<tr>';
			print '<td><label class="checkbox">' . '<input type="checkbox" id="chk' . $c++ . '"/></label></td>';
			foreach ($this->columns as $h) {
				$data = $item->get($h);
				print '<td>';
				if ($h == 'from' || $h == 'to') {
					// TODO: move he_IL to config
					$d = new Zend_Date($data->sec, null, new Zend_Locale('he_IL'));
					echo $d->getIso();
				} else {
					print $data;
				}
				print '</td>';
			}
			print '</tr>';
		}
		print '</tbody></table>';
		print '<div class="pagination pagination-right">';
		if ($this->pager['count'] > 1) :
			$current = $this->pager['current'];
			$count = $this->pager['count'];
			$min = $current - 5;
			$max = $current + 5;
			
			if ($current < 0) {
				$current = 0;
			}
			
			if ($current > $count) {
				$current = $count;
			}

			if ($min < 0) {
				$min = 0;
			}
			if ($max > $count) {
				$max = $count;
			}

			print '<ul>';
			print '<li' . ($current == 1 ? ' class="disabled"' : '' ) . '><a href="#">First</a></li>';
			print '<li' . ($current == 1 ? ' class="disabled"' : '' ) . '><a href="#">Prev</a></li>';
			for ($i = $min; $i < $current; $i++) {
				print '<li><a href="#">' . ($i) . '</a></li>';
			}
			
			print '<li class="active disabled"><a href="javascript:void(0);">' . ($current) . '</a></li>';
			$i++;
			for (; $i <= $max; $i++) {
				print '<li><a href="#">' . ($i) . '</a></li>';
			}
			print '<li' . ($current == $count ?  'class="disabled"' : '' ) . '><a href="#">Next</a></li>';
			print '<li' . ($current == $count ? ' class="disabled"' : '' ) . '><a href="#">Last</a></li>';
			print '</ul>';
		endif;
		echo "</div>";
	else :
		print "No data";
	endif;
	?>
</div>